<!-- TODO: make this a view, only include inside the app -->
<nav *ngIf="inApp">
    
    <h1 routerLink="/" class="clickable">The Speaker's Studio</h1>
    
    <!-- <div class="nav-top">
        <div class="content clickable" *ngIf="user && userService.can('account_edit')" routerLinkActive="active" routerLink="/app/user">

            <div class="user-picture">
                <i class="fa fa-user"></i>
            </div>
            <div class="user-name">
                {{user.email}}
            </div>
            <div class="link">Your account</div>
            
        </div>
    </div> -->

    <a routerLink="/app/materials" routerLinkActive="active" class="nav-item"
        *ngIf="userService.can('material_page_view')">
        <span>Files</span>
    </a>

    <a routerLink="/app/videos" routerLinkActive="active" class="nav-item"
        *ngIf="userService.can('video_page_view')">
        <span>Videos</span>
    </a>

    <a routerLink="/app/contact/reportbug" routerLinkActive="active" class="nav-item"
        *ngIf="userService.can('contact_page_view')">
        <span>Report a Bug</span>
    </a>

    <a routerLink="/app/admin" routerLinkActive="active" class="nav-item" 
        *ngIf="userService.isSuperAdmin()">
        <span>Admin</span>
    </a>
    
    <a *ngIf="user" (click)="logout()" class="nav-item">
        <span>Log Out</span> <i class="fa fa-sign-out"></i>
    </a>
    
</nav>

<div (click)="closeOverlays()" class="backdrop nav-backdrop" [@fade] [class.show]="showBackdrop"></div>

<!-- <div class="curtain"
    *ngIf="inApp"
    [style.top]="(scrollpos * 0.75) + 'px'">
</div> -->

<!-- <div class="background" *ngIf="backgroundVisible" [@shrinkVertical]></div> -->

<router-outlet></router-outlet>

<div class="dialog-container" [class.show]="showDialog">
    <div class="dialog" [@dialog]="'default'" *ngIf="showDialog">
        <div class="dialog-content">
            <h2>{{dialogTitle}}</h2>
            <p [innerHTML]="dialogMessage"></p>
            <input type="text" [placeholder]="dialogPrompt" formInput [(ngModel)]="dialogInput" *ngIf="dialogPrompt" />
        </div>
        <div class="button-group">
            <button (click)="onDialogDismiss()" *ngIf="!dialogHideCancel">{{dialogCancel}}</button>
            <button class="button brackets" *ngIf="dialogConfirm" (click)="onDialogConfirm()" [class.disabled]="dialogPrompt && !dialogInput">{{dialogConfirm}}</button>
        </div>
    </div>
</div>

<div class="toast" (click)="hideToast()">
    <span [@bubble] *ngIf="toastMessage">{{toastMessage}}</span>
</div>

<login [show]="showLogin" (done)="handleLogin($event)" class="dialog-container" [class.show]="showLogin"></login>

<div class="loader" *ngIf="loaderVisible">
    <logo class="white"></logo>
</div>

<footer (window:scroll)="onScroll()">

    <span>&copy;2017 Kate Bringardner, LLC</span>
    <a routerLink="/app/legal" *ngIf="user">Legal stuff</a>
    <img src="/images/comodo_secure_seal_76x26_transp.png" />

    <a *ngIf="user" routerLink="/app/user">Your Account</a>

</footer>