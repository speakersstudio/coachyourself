{"version":3,"sources":["../../app/src/view/materials-page.view.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAOuB;AAEvB,4DAA4D;AAI5D,8DAA4D;AAI5D,4CAA2C;AAO3C;IAGI,2BACY,IAAkB,EAClB,cAA8B;QAD9B,SAAI,GAAJ,IAAI,CAAc;QAClB,mBAAc,GAAd,cAAc,CAAgB;IACtC,CAAC;IAEL,oCAAQ,GAAR;IAEA,CAAC;IAED,0CAAc,GAAd,UAAe,QAAsB;QACjC,EAAE,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACvD,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,6SAA6S,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACvW,CAAC;IACL,CAAC;IAED,2CAAe,GAAf,UAAgB,EAAU;QACtB,IAAI,GAAY,CAAC;QACjB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO;YACjC,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,CAAC;gBACpB,GAAG,GAAG,OAAO,CAAC;gBACd,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;QACL,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED,yCAAa,GAAb,UAAc,GAAY;QACtB,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACpC,CAAC;IAED,6CAAiB,GAAjB,UAAkB,EAAU;QACxB,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED,sCAAU,GAAV,UAAW,CAAe;QACtB,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC;QAC/D,wCAAwC;QACxC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACJ,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC;QAC9B,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,sBAAsB,CAAC;QAClC,CAAC;IACL,CAAC;IA9CQ;QAAR,YAAK,EAAE;kCAAU,iBAAO;sDAAC;IADjB,iBAAiB;QAL7B,gBAAS,CAAC;YACP,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,iBAAiB;YAC3B,WAAW,EAAE,2CAA2C;SAC3D,CAAC;yCAKoB,4BAAY;YACF,gCAAc;OALjC,iBAAiB,CAgD7B;IAAD,wBAAC;CAhDD,AAgDC,IAAA;AAhDY,8CAAiB","file":"materials-page.view.js","sourcesContent":["import { \r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    Pipe\r\n} from '@angular/core';\r\n\r\nimport {AppComponent    } from '../component/app.component';\r\n\r\nimport { TabData } from '../model/tab-data';\r\n\r\nimport { LibraryService } from '../service/library.service';\r\n\r\nimport { MaterialItem } from '../model/material-item';\r\nimport { Package } from '../model/package';\r\nimport { Library } from '../model/library';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: '.materials-page',\r\n    templateUrl: '../template/view/materials-page.view.html'\r\n})\r\nexport class MaterialsPageView implements OnInit {\r\n    @Input() library: Library;\r\n\r\n    constructor(\r\n        private _app: AppComponent,\r\n        private libraryService: LibraryService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n\r\n    }\r\n\r\n    selectMaterial(material: MaterialItem): void {\r\n        if (material.versions.length > 0) {\r\n            this.libraryService.downloadMaterial(material._id);\r\n        } else {\r\n            this._app.dialog('Whoops', 'We seem to have not published any versions of that Material Item. Hopefully we\\'re actively working to fix it. Try again in a few minutes, and if you still get this message, please let us know. You can email us at awesomedesk@thespeakers-studio.com or use the \"Report a Bug\" feature in the App menu.', 'Okay Then', null, true);\r\n        }\r\n    }\r\n\r\n    findPackageById(id: string): Package {\r\n        let pkg: Package;\r\n        this.library.packages.forEach(thispkg => {\r\n            if (thispkg._id == id) {\r\n                pkg = thispkg;\r\n                return false;\r\n            }\r\n        });\r\n        return pkg;\r\n    }\r\n\r\n    selectPackage(pkg: Package): void {\r\n        this.selectPackageById(pkg._id);\r\n    }\r\n\r\n    selectPackageById(id: string): void {\r\n        this.libraryService.downloadPackage(id);\r\n    }\r\n\r\n    versionTag(m: MaterialItem): string {\r\n        let v = this.libraryService.getLatestVersionForMaterialItem(m);\r\n        // TODO: show the date this was released\r\n        if (v) {\r\n            return \"version \" + v.ver;\r\n        } else {\r\n            return \"no version published\";\r\n        }\r\n    }\r\n}\r\n"]}