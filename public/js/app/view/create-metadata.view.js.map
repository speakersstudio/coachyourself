{"version":3,"sources":["../../app/src/app/view/create-metadata.view.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAMuB;AAGvB,0EAAuE;AACvE,2DAAyD;AAIzD,kDAA8D;AAW9D,IAAa,kBAAkB;IAc3B,4BACY,WAAwB,EACxB,mBAAwC;QADxC,gBAAW,GAAX,WAAW,CAAa;QACxB,wBAAmB,GAAnB,mBAAmB,CAAqB;QAd1C,SAAI,GAA+B,IAAI,mBAAY,EAAE,CAAC;IAe5D,CAAC;IAEL,qCAAQ,GAAR;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,IAAI,aAAa,GAAG,cAAc,GAAG,UAAU,CAAC;IAC/E,CAAC;IAED,2CAAc,GAAd;QAAA,iBAmBC;QAlBG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,aAAa,CAAC,CAAC,CAAC;gBAC7B,4BAA4B;gBAC5B,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC;qBACtF,IAAI,CAAC,UAAA,WAAW;oBACb,KAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAC;YACX,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,wBAAwB;gBACxB,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC;qBACnF,IAAI,CAAC,UAAA,QAAQ;oBACV,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC1B,CAAC,CAAC,CAAC;YACX,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC;IACL,CAAC;IAED,mCAAM,GAAN,UAAO,IAAkB;QACrB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC;IAED,mCAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAEL,yBAAC;AAAD,CA3DA,AA2DC,IAAA;AAzDa;IAAT,aAAM,EAAE;8BAAO,mBAAY;gDAAoC;AAIvD;IAAR,YAAK,EAAE;;gDAAc;AANb,kBAAkB;IAT9B,gBAAS,CAAC;QACP,QAAQ,EAAE,MAAM,CAAC,EAAE;QACnB,QAAQ,EAAE,iBAAiB;QAC3B,WAAW,EAAE,4CAA4C;QACzD,UAAU,EAAE;YACR,sBAAU,CAAC,MAAM;YACjB,sBAAU,CAAC,IAAI;SAClB;KACJ,CAAC;qCAgB2B,0BAAW;QACH,2CAAmB;GAhB3C,kBAAkB,CA2D9B;AA3DY,gDAAkB","file":"create-metadata.view.js","sourcesContent":["import { \r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { GameDatabaseService } from \"../service/game-database.service\";\r\nimport { UserService } from \"../../service/user.service\";\r\n\r\nimport { GameMetadata } from '../../model/game-metadata';\r\n\r\nimport { DialogAnim, ToggleAnim } from '../../util/anim.util';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: \"create-metadata\",\r\n    templateUrl: \"../template/view/create-metadata.view.html\",\r\n    animations: [\r\n        DialogAnim.dialog,\r\n        ToggleAnim.fade\r\n    ]\r\n})\r\nexport class CreateMetadataView implements OnInit {\r\n\r\n    @Output() done: EventEmitter<GameMetadata> = new EventEmitter();\r\n\r\n    isPosting: boolean;\r\n\r\n    @Input() type: string;\r\n    outputType: string;\r\n\r\n    name: string;\r\n    min: number;\r\n    max: number;\r\n    description: string;\r\n\r\n    constructor(\r\n        private userService: UserService,\r\n        private gameDatabaseService: GameDatabaseService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.outputType = this.type == 'playerCount' ? 'Player Count' : 'Duration';\r\n    }\r\n\r\n    createMetadata(): void {\r\n        this.isPosting = true;\r\n        if (this.userService.can('metadata_create')) {\r\n            if (this.type == \"playerCount\") {\r\n                // create a new player count\r\n                this.gameDatabaseService.createPlayerCount(this.name, this.min, this.max, this.description)\r\n                    .then(playercount => {\r\n                        this.doDone(playercount);\r\n                    });\r\n            } else {\r\n                // create a new Duration\r\n                this.gameDatabaseService.createDuration(this.name, this.min, this.max, this.description)\r\n                    .then(duration => {\r\n                        this.doDone(duration);\r\n                    });\r\n            }\r\n        } else {\r\n            this.cancel();\r\n        }\r\n    }\r\n\r\n    doDone(item: GameMetadata): void {\r\n        this.isPosting = false;\r\n        this.name = '';\r\n        this.min = 0;\r\n        this.max = 0;\r\n        this.description = '';\r\n\r\n        this.done.emit(item);\r\n    }\r\n\r\n    cancel(): boolean {\r\n        this.done.emit(null);\r\n        return false;\r\n    }\r\n\r\n}\r\n"]}